kind: Deployment
metadata:
  name: '*'
spec:
  template:
    spec:
      containers:
        - name: cloudsql-proxy
          resources:
            limits:
              cpu: "200m"
              memory: "100Mi"
          image: gcr.io/cloudsql-docker/gce-proxy:latest # is it reasonable to use latest tag here?
          env:
          - name: CONNECTION_NAME
            valueFrom:
              configMapKeyRef:
                name: cloud-sql-admin
                key: connectionName
          command: ["/cloud_sql_proxy",
                    "-instances=$(CONNECTION_NAME)=tcp:5432"]
